<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Player MP4</title>

<style>
/* =========================
   TEMA
========================= */
:root {
  --bg: #0f0f0f;
  --card: #1c1c1c;
  --primary: #1e88e5;
  --danger: #c62828;
  --success: #2e7d32;
  --text: #ffffff;
  --muted: #aaaaaa;
}

.light {
  --bg: #f2f2f2;
  --card: #ffffff;
  --text: #000000;
}

/* =========================
   BASE
========================= */
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: Arial, sans-serif;
}

.fade-in {
  animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* =========================
   HEADER / ABAS
========================= */
.header {
  text-align: center;
  padding: 14px;
  font-weight: bold;
  background: #111;
}

.tabs {
  display: flex;
  background: #111;
}

.tabs button {
  flex: 1;
  padding: 12px;
  border: none;
  background: none;
  color: var(--muted);
}

.tabs button.active {
  color: var(--primary);
  border-bottom: 2px solid var(--primary);
}

/* =========================
   CONTEÚDO
========================= */
.tab-content {
  display: none;
  padding: 16px;
  animation: slide 0.3s ease;
}

.tab-content.active {
  display: block;
}

@keyframes slide {
  from { opacity: 0; transform: translateX(15px); }
  to { opacity: 1; transform: translateX(0); }
}

.card {
  background: var(--card);
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 16px;
}

input, select, button {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border-radius: 8px;
  border: none;
  font-size: 14px;
}

input, select {
  background: #2a2a2a;
  color: white;
}

button {
  background: var(--primary);
  color: white;
}

button.danger {
  background: var(--danger);
}

button.success {
  background: var(--success);
}

/* =========================
   VIDEO
========================= */
video {
  width: 100%;
  height: 220px;
  background: black;
  border-radius: 12px;
}

/* =========================
   LISTAS
========================= */
ul {
  list-style: none;
  padding: 0;
}

li {
  background: var(--card);
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 8px;
  font-size: 14px;
}

/* =========================
   TOAST
========================= */
.toast {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--primary);
  color: #fff;
  padding: 12px 18px;
  border-radius: 20px;
  opacity: 0;
  transition: opacity 0.3s;
  z-index: 9999;
}

.toast.show {
  opacity: 1;
}
</style>
</head>

<body>
<div id="app" class="fade-in">

<div class="header">Player MP4</div>

<div class="tabs">
  <button class="active" onclick="openTab('player')">Player</button>
  <button onclick="openTab('downloads')">Downloads</button>
</div>

<!-- PLAYER -->
<div id="player" class="tab-content active">

  <video id="video" controls></video>

  <div class="card">
    <input id="url" placeholder="Cole o link MP4 aqui">
    <button onclick="playVideo()">Assistir</button>
    <button class="success" onclick="downloadVideo()">⬇ Baixar vídeo</button>
  </div>

</div>

<!-- DOWNLOADS -->
<div id="downloads" class="tab-content">

  <button class="danger" onclick="clearHistory()">Limpar histórico</button>
  <ul id="downloadsList"></ul>

</div>

</div>

<div id="toast" class="toast"></div>

<script>
/* =========================
   TEMA AUTOMÁTICO
========================= */
if (window.matchMedia("(prefers-color-scheme: light)").matches) {
  document.body.classList.add("light");
}

/* =========================
   ABAS
========================= */
function openTab(id) {
  document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
  document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));

  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

/* =========================
   PLAYER
========================= */
function playVideo() {
  const url = document.getElementById("url").value;
  const video = document.getElementById("video");

  if (!url) return showToast("Cole um link válido");

  video.src = url;
  video.play();

  video.addEventListener("play", () => {
    if (video.requestFullscreen) video.requestFullscreen();
  });
}

/* =========================
   DOWNLOAD
========================= */
function downloadVideo() {
  const video = document.getElementById("video");
  if (!video.src) return showToast("Nenhum vídeo");

  const name = "video_" + Date.now() + ".mp4";
  saveDownload(name, video.src);

  const a = document.createElement("a");
  a.href = video.src;
  a.download = name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);

  showToast("Download iniciado");
}

/* =========================
   HISTÓRICO
========================= */
function saveDownload(name, url) {
  let data = JSON.parse(localStorage.getItem("downloads") || "[]");
  data.unshift({ name, url, date: new Date().toLocaleString() });
  localStorage.setItem("downloads", JSON.stringify(data));
  renderDownloads();
}

function renderDownloads() {
  const list = document.getElementById("downloadsList");
  list.innerHTML = "";

  let data = JSON.parse(localStorage.getItem("downloads") || "[]");

  data.forEach((d, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      <strong>${d.name}</strong><br>
      <small>${d.date}</small>
      <button onclick="removeDownload(${i})">❌</button>
    `;
    li.onclick = () => {
      document.getElementById("video").src = d.url;
      openTab('player');
    };
    list.appendChild(li);
  });
}

function removeDownload(i) {
  let data = JSON.parse(localStorage.getItem("downloads") || "[]");
  data.splice(i, 1);
  localStorage.setItem("downloads", JSON.stringify(data));
  renderDownloads();
}

function clearHistory() {
  localStorage.removeItem("downloads");
  renderDownloads();
  showToast("Histórico limpo");
}

/* =========================
   TOAST
========================= */
function showToast(msg) {
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(() => t.classList.remove("show"), 2000);
}

renderDownloads();
</script>

</body>
</html>